(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{115:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return p}));var r=n(2),a=n(6),o=(n(0),n(134)),i={id:"AuthProvider",title:"AuthProvider",sidebar_label:"AuthProvider"},c={id:"AuthProvider",isDocsHomePage:!1,title:"AuthProvider",description:"AuthProvider is the main component needed from this package. It includes all the logic and methods needed for your application. AuhtProvider is as wrapping component that uses context to pass all its logic to the rest of your application.",source:"@site/docs/AuthProvider.md",permalink:"/docs/AuthProvider",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/AuthProvider.md",sidebar_label:"AuthProvider",sidebar:"someSidebar",next:{title:"Accessing the auth object",permalink:"/docs/AccessingAuth"}},l=[{value:"AuthProvider Props",id:"authprovider-props",children:[]},{value:"Auth Properties",id:"auth-properties",children:[]}],s={rightToc:l};function p(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"AuthProvider")," is the main component needed from this package. It includes all the logic and methods needed for your application. ",Object(o.b)("inlineCode",{parentName:"p"},"AuhtProvider")," is as wrapping component that uses context to pass all its logic to the rest of your application."),Object(o.b)("br",null),Object(o.b)("p",null," Before implemetation, let's examine some of the logic in ",Object(o.b)("inlineCode",{parentName:"p"},"AuthProvider")," . There's an object stored in the component called ",Object(o.b)("inlineCode",{parentName:"p"},"storage")," and is of the ",Object(o.b)("inlineCode",{parentName:"p"},"Storage")," type. This object includes 5 fields, all of which are either a ",Object(o.b)("inlineCode",{parentName:"p"},"string")," or ",Object(o.b)("inlineCode",{parentName:"p"},"null"),": "),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-ts"}),"type Storage = Record<'kl' | 'klo' | 'kloo' | 'klk' | 'access_token', null | string>;\n")),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"key"),Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"description"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"kl"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"the role key of the authenticated user")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"klo"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"an encoded version of roleAccessConfig in config.json")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"kloo"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"a random string")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"klk"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"a random string")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"access_token"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"the current users access token")))),Object(o.b)("br",null),Object(o.b)("p",null,"Most of the methods and properties stored in ",Object(o.b)("inlineCode",{parentName:"p"},"AuthProvider")," use this object in some way, whether it being for making fetch request, or showing certain components to the client"),Object(o.b)("br",null),Object(o.b)("br",null),Object(o.b)("p",null,"Let's look at an example of how to implement ",Object(o.b)("inlineCode",{parentName:"p"},"AuthProvider")," :"),Object(o.b)("h5",{id:"appjs-"},Object(o.b)("inlineCode",{parentName:"h5"},"App.js")," :"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),'import React from \'react\';\nimport { NavigationContainer } from "@react-navigation/native";\nimport { createStackNavigator } from "@react-navigation/stack";\nimport { AuthProvider } from "@hilma/auth-native";\n\nimport Admin from \'./components/Admin\';\nimport Client from \'./components/Client\';\n\nconst RootStack = createStackNavigator();\n\nconst App = () => (\n    <NavigationContainer>\n        <AuthProvider>\n            <RootStack.Navigator>\n                <RootStack.Screen name="Admin" component={Admin} />\n                <RootStack.Screen name="Client" component={Client} />\n                <RootStack.Screen name="Login" component={Login} />\n            </RootStack.Navigator>\n        </AuthProvider>\n    </NavigationContainer>\n);\n\nexport default App;\n')),Object(o.b)("p",null,"If you want to make this shorter you can import ",Object(o.b)("inlineCode",{parentName:"p"},"provide")," from the ",Object(o.b)("inlineCode",{parentName:"p"},"@hilma/tools")," package:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),'import React from \'react\';\nimport { NavigationContainer } from "@react-navigation/native";\nimport { createStackNavigator } from "@react-navigation/stack";\nimport { AuthProvider } from "@hilma/auth-native";\nimport { provide } from \'@hilma/tools\';\n\nimport Admin from \'./components/Admin\';\nimport Client from \'./components/Client\';\n\nconst RootStack = createStackNavigator();\n\nconst App = () => (\n    <RootStack.Navigator>\n        <RootStack.Screen name="Admin" component={Admin} />\n        <RootStack.Screen name="Client" component={Client} />\n        <RootStack.Screen name="Login" component={Login} />\n    </RootStack.Navigator>\n);\n\nexport default provide(NavigationContainer, AuthProvider)(App);\n')),Object(o.b)("br",null),Object(o.b)("br",null),Object(o.b)("h3",{id:"authprovider-props"},"AuthProvider Props"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-ts"}),"interface AuthProviderProps {\n    /**\n     * If true, when a fetch request is made via superAuthFetch and the user is unauthorized, the logout function will be called\n     * Defaults to false\n     */\n    logoutOnUnauthorized?: boolean;\n    /**\n     * When `AuthProvider` mounts it doesn't render its children until it fetchs from AsyncStorage, instead it will render the fallback\n     * Defaults to `<AppLoading />` from `expo`\n     */\n    fallback?: JSX.Element;\n    /**\n     * If you want a reference to the auth object pass a ref\n     */\n    ref?: React.Ref<HilmaAuth>;\n}\n")),Object(o.b)("br",null),Object(o.b)("br",null),Object(o.b)("h3",{id:"auth-properties"},"Auth Properties"),Object(o.b)("p",null,"Now let's look at whats included in the auth object. The object implements the ",Object(o.b)("inlineCode",{parentName:"p"},"HilmaAuth")," interface:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-ts"}),"interface HilmaAuth {\n    /**\n     * Object including `klo` and `kl` from `storage` \n     */\n    kls: {\n        kl: string | null;\n        klo: string | null;\n    };\n    /**\n     * Sets the key value pair in `storage` and AsyncStorage\n     * @param key The item key you want to store\n     * @param value The value\n     */\n    setAuthItem(key: keyof Storage, value: string): Promise<void>;\n    /**\n     * Returns the auth storage item\n     * @param key The key\n     */\n    getAuthItem(key: keyof Storage): string | null;\n    /**\n     * Removes the item from `storage` and AsyncStorage\n     * @param key The item key you want to remove\n     */\n    removeAuthItem(key: keyof Storage): Promise<void>;\n    /**\n     * Returns the acces token\n     */\n    getAccessToken(): string | null;\n    /**\n     * If true, the user is authenticated\n     */\n    isAuthenticated: boolean;\n    /**\n     * Removes all storage in `storage` \n     */\n    logout(): Promise<void>;\n    /**\n     * Will fetch from data from the server\n     * @param input the url.the apiUrl in variables.js will be used to make the request\n     * @param init \n     * @returns A Promise with the resloved value being a tuple of the response and the errror (if one accured). the response will already be in json format\n     */\n    superAuthFetch(input: RequestInfo, init?: RequestInit | undefined): Promise<[any, any]>;\n    /**\n     * Log in function\n     * @param body The body you want to send to the server. example: { email: `hilma@gmail.com`, password: `somepassword` }\n     * @param input The login endpoint. Defaults to `/api/CustomUsers/elogin`\n     * @returns A Promise with the resolved value being an object: `{ success: boolean; user?: any; msg?: any; }`\n     */\n    login(body: Record<'password' | 'username' | 'email', string>, input?: RequestInfo): Promise<{ success: boolean; user?: any; msg?: any; }>;\n}\n")))}p.isMDXComponent=!0},134:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=a.a.createContext({}),p=function(e){var t=a.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},u=function(e){var t=p(e.components);return a.a.createElement(s.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},m=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),u=p(n),m=r,d=u["".concat(i,".").concat(m)]||u[m]||b[m]||o;return n?a.a.createElement(d,c(c({ref:t},s),{},{components:n})):a.a.createElement(d,c({ref:t},s))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var s=2;s<o;s++)i[s]=n[s];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);